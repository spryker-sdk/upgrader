version: "3.9"

x-volumes:
  volumes:
    - spryker_upgrader_sdk_dev_data_sync:/data

services:
  upgrader-sdk:
    image: spryker-sdk/upgrader-local:latest
    build:
      context: ./
      dockerfile: ./dev.Dockerfile
    tty: true
    command: "/bin/bash"
    volumes:
      - $PWD:/spryker_upgrader_sdk_dev_data_sync:rw
      - ../b2c-demo-shop:/data/src/Pyz

volumes:
    spryker_upgrader_sdk_dev_data_sync:

x-mutagen:
  sync:
    defaults:
      symlink:
        mode: posix-raw
      ignore:
        paths:
          - '/.git*'
          - '.idea'
          - '.DS_Store'
          - '/src/Pyz/'

    spryker-upgrader-sdk-dev-codebase:
      alpha: "./"
      beta: "volume://spryker_upgrader_sdk_dev_data_sync"
      mode: two-way-resolved
      permissions:
        defaultFileMode: 0666
        defaultDirectoryMode: 0777
      configurationBeta:
        permissions:
          defaultOwner: id:1000
          defaultGroup: id:1000
